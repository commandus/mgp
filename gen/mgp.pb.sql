/* This file was generated by ODB, object-relational mapping (ORM)
 * compiler for C++.
 */

DROP TABLE IF EXISTS "Inventory_medias" CASCADE;

DROP TABLE IF EXISTS "Inventory" CASCADE;

DROP TABLE IF EXISTS "Org_medias" CASCADE;

DROP TABLE IF EXISTS "Org" CASCADE;

DROP TABLE IF EXISTS "Employee_medias" CASCADE;

DROP TABLE IF EXISTS "Employee" CASCADE;

DROP TABLE IF EXISTS "Person_medias" CASCADE;

DROP TABLE IF EXISTS "Person" CASCADE;

DROP TABLE IF EXISTS "User" CASCADE;

DROP TABLE IF EXISTS "Credentials" CASCADE;

CREATE TABLE "Credentials" (
  "id" BIGSERIAL NOT NULL PRIMARY KEY,
  "start" INTEGER NOT NULL,
  "finish" INTEGER NOT NULL,
  "lastlogin" INTEGER NOT NULL,
  "mk" TEXT NOT NULL,
  "mv" TEXT NOT NULL);

CREATE TABLE "User" (
  "credentials" BIGINT NULL,
  "id" BIGSERIAL NOT NULL PRIMARY KEY,
  "role" INTEGER NOT NULL,
  "cn" TEXT NOT NULL,
  CONSTRAINT "credentials_fk"
    FOREIGN KEY ("credentials")
    REFERENCES "Credentials" ("id"));

CREATE INDEX "user_credentials_idx"
  ON "User" ("credentials");

CREATE TABLE "Person" (
  "id" BIGSERIAL NOT NULL PRIMARY KEY,
  "birthday" INTEGER NOT NULL,
  "gender" INTEGER NOT NULL,
  "tag" INTEGER NOT NULL,
  "first_name" TEXT NOT NULL,
  "last_name" TEXT NOT NULL,
  "middle_name" TEXT NOT NULL,
  "prefix" TEXT NOT NULL,
  "document_type" TEXT NOT NULL,
  "document" TEXT NOT NULL,
  "phone_mobile" TEXT NOT NULL,
  "email" TEXT NOT NULL);

CREATE TABLE "Person_medias" (
  "object_id" BIGINT NOT NULL,
  "index" INTEGER NOT NULL,
  "value_id" BIGINT NOT NULL,
  "value_content_length" BIGINT NOT NULL,
  "value_tag" INTEGER NOT NULL,
  "value_content_type" TEXT NOT NULL,
  "value_uri" TEXT NOT NULL,
  "value_data" TEXT NOT NULL,
  CONSTRAINT "object_id_fk"
    FOREIGN KEY ("object_id")
    REFERENCES "Person" ("id")
    ON DELETE CASCADE);

CREATE INDEX "Person_medias_object_id_i"
  ON "Person_medias" ("object_id");

CREATE INDEX "Person_medias_index_i"
  ON "Person_medias" ("index");

CREATE TABLE "Employee" (
  "person" BIGINT NULL,
  "user" BIGINT NULL,
  "id" BIGSERIAL NOT NULL PRIMARY KEY,
  "role_number" INTEGER NOT NULL,
  "name" TEXT NOT NULL,
  CONSTRAINT "person_fk"
    FOREIGN KEY ("person")
    REFERENCES "Person" ("id"),
  CONSTRAINT "user_fk"
    FOREIGN KEY ("user")
    REFERENCES "User" ("id"));

CREATE INDEX "employee_person_idx"
  ON "Employee" ("person");

CREATE INDEX "employee_user_idx"
  ON "Employee" ("user");

CREATE TABLE "Employee_medias" (
  "object_id" BIGINT NOT NULL,
  "index" INTEGER NOT NULL,
  "value_id" BIGINT NOT NULL,
  "value_content_length" BIGINT NOT NULL,
  "value_tag" INTEGER NOT NULL,
  "value_content_type" TEXT NOT NULL,
  "value_uri" TEXT NOT NULL,
  "value_data" TEXT NOT NULL,
  CONSTRAINT "object_id_fk"
    FOREIGN KEY ("object_id")
    REFERENCES "Employee" ("id")
    ON DELETE CASCADE);

CREATE INDEX "Employee_medias_object_id_i"
  ON "Employee_medias" ("object_id");

CREATE INDEX "Employee_medias_index_i"
  ON "Employee_medias" ("index");

CREATE TABLE "Org" (
  "manager" BIGINT NULL,
  "id" BIGSERIAL NOT NULL PRIMARY KEY,
  "name" TEXT NOT NULL,
  CONSTRAINT "manager_fk"
    FOREIGN KEY ("manager")
    REFERENCES "Employee" ("id"));

CREATE INDEX "org_manager_idx"
  ON "Org" ("manager");

CREATE TABLE "Org_medias" (
  "object_id" BIGINT NOT NULL,
  "index" INTEGER NOT NULL,
  "value_id" BIGINT NOT NULL,
  "value_content_length" BIGINT NOT NULL,
  "value_tag" INTEGER NOT NULL,
  "value_content_type" TEXT NOT NULL,
  "value_uri" TEXT NOT NULL,
  "value_data" TEXT NOT NULL,
  CONSTRAINT "object_id_fk"
    FOREIGN KEY ("object_id")
    REFERENCES "Org" ("id")
    ON DELETE CASCADE);

CREATE INDEX "Org_medias_object_id_i"
  ON "Org_medias" ("object_id");

CREATE INDEX "Org_medias_index_i"
  ON "Org_medias" ("index");

CREATE TABLE "Inventory" (
  "org" BIGINT NULL,
  "id" BIGSERIAL NOT NULL PRIMARY KEY,
  "inventory_number" BIGINT NOT NULL,
  "name" TEXT NOT NULL,
  CONSTRAINT "org_fk"
    FOREIGN KEY ("org")
    REFERENCES "Org" ("id"));

CREATE INDEX "inventory_org_idx"
  ON "Inventory" ("org");

CREATE TABLE "Inventory_medias" (
  "object_id" BIGINT NOT NULL,
  "index" INTEGER NOT NULL,
  "value_id" BIGINT NOT NULL,
  "value_content_length" BIGINT NOT NULL,
  "value_tag" INTEGER NOT NULL,
  "value_content_type" TEXT NOT NULL,
  "value_uri" TEXT NOT NULL,
  "value_data" TEXT NOT NULL,
  CONSTRAINT "object_id_fk"
    FOREIGN KEY ("object_id")
    REFERENCES "Inventory" ("id")
    ON DELETE CASCADE);

CREATE INDEX "Inventory_medias_object_id_i"
  ON "Inventory_medias" ("object_id");

CREATE INDEX "Inventory_medias_index_i"
  ON "Inventory_medias" ("index");

